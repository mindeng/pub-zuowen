(this["webpackJsonpsimple-light-react"]=this["webpackJsonpsimple-light-react"]||[]).push([[0],{131:function(e,t,c){},244:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),a=c(12),s=c.n(a),l=c(15),i=c(13),o=c(20),j=c(10),d=c(8),u=(c(131),c(113)),b=c.n(u),x=c(117),m=c(1);var h=function(){var e=Object(n.useState)(!0),t=Object(j.a)(e,2),c=t[0],r=t[1];Object(n.useEffect)((function(){var e=function(){window.pageYOffset>10?r(!1):r(!0)};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[c]);var a=Object(m.jsx)(Y.Consumer,{children:function(e){var t,c=e.user,n=(e._,e.logout);return Object(m.jsx)(m.Fragment,{children:c.token?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:null!==(t="/articles/by/"+(null===c||void 0===c?void 0:c.Id))&&void 0!==t?t:"",className:"font-medium text-gray-600 hover:text-gray-900 px-5 py-3 flex items-center transition duration-150 ease-in-out",children:c.FirstName})}),Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"#",onClick:n,className:"font-medium text-gray-600 hover:text-gray-900 px-5 py-3 flex items-center transition duration-150 ease-in-out",children:"\u767b\u51fa"})})]}):Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/signin",className:"font-medium text-gray-600 hover:text-gray-900 px-5 py-3 flex items-center transition duration-150 ease-in-out",children:"\u767b\u5f55"})})})}});return Object(m.jsx)("header",{className:"fixed w-full z-30 md:bg-opacity-90 transition duration-300 ease-in-out ".concat(!c&&"bg-white blur shadow-lg"),children:Object(m.jsx)("div",{className:"max-w-6xl mx-auto px-5 sm:px-6",children:Object(m.jsxs)("div",{className:"flex items-center justify-between h-16 md:h-20",children:[Object(m.jsx)("div",{className:"flex-shrink-0 mr-4",children:Object(m.jsx)(l.b,{to:"/",className:"block","aria-label":"Cruip",children:Object(m.jsx)("img",{className:"md:max-w-none mx-auto",src:"/logo192.png",width:"40",height:"40",alt:"logo"})})}),Object(m.jsx)("nav",{className:"flex flex-grow",children:Object(m.jsx)("ul",{className:"flex flex-grow justify-end flex-wrap items-center",children:a})})]})})})};var O=function(){return Object(m.jsxs)("section",{className:"relative",children:[Object(m.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 bottom-0 pointer-events-none","aria-hidden":"true",children:Object(m.jsxs)("svg",{width:"1360",height:"578",viewBox:"0 0 1360 578",xmlns:"http://www.w3.org/2000/svg",children:[Object(m.jsx)("defs",{children:Object(m.jsxs)("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"illustration-01",children:[Object(m.jsx)("stop",{stopColor:"#FFF",offset:"0%"}),Object(m.jsx)("stop",{stopColor:"#EAEAEA",offset:"77.402%"}),Object(m.jsx)("stop",{stopColor:"#DFDFDF",offset:"100%"})]})}),Object(m.jsxs)("g",{fill:"url(#illustration-01)",fillRule:"evenodd",children:[Object(m.jsx)("circle",{cx:"1232",cy:"128",r:"128"}),Object(m.jsx)("circle",{cx:"155",cy:"443",r:"64"})]})]})}),Object(m.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:Object(m.jsx)("div",{className:"pt-32 pb-12 md:pt-40 md:pb-20",children:Object(m.jsxs)("div",{className:"text-center pb-12 md:pb-16",children:[Object(m.jsx)("h1",{className:"text-3xl md:text-4xl font-bold leading-tighter tracking-tighter mb-4","data-aos":"zoom-y-out",children:"\u5929\u4e0b\u4e8b\u6709\u96be\u6613\u4e4e\uff1f"}),Object(m.jsxs)("div",{className:"max-w-3xl mx-auto",children:[Object(m.jsx)("p",{className:"text-xl font-light text-gray-500 mb-8","data-aos":"zoom-y-out","data-aos-delay":"150",children:"\u4e3a\u4e4b\uff0c\u5219\u96be\u8005\u4ea6\u6613\u77e3\uff1b\u4e0d\u4e3a\uff0c\u5219\u6613\u8005\u4ea6\u96be\u77e3\u3002"}),Object(m.jsxs)("div",{className:"max-w-xs mx-auto sm:max-w-none sm:flex sm:justify-center","data-aos":"zoom-y-out","data-aos-delay":"300",children:[Object(m.jsx)("div",{children:Object(m.jsx)(l.b,{to:"/compose",className:"btn text-white bg-blue-600 hover:bg-blue-700 w-full mb-4 sm:w-auto sm:mb-0",children:"\u5f00\u59cb\u5199\u4f5c"})}),Object(m.jsx)(Y.Consumer,{children:function(e){var t=e.user;e._,e.__;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(l.b,{to:t.token?"/articles/by/".concat(t.Id):"/signin",className:"btn text-white bg-gray-900 hover:bg-gray-800 w-full sm:w-auto sm:ml-4",children:"\u6211\u7684\u4f5c\u54c1"})})}})]})]})]})})})]})},f=c(35),p=function(e){return g(w("/api/v1/auth"),e)},v=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var c,n,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=w("/api/v1/user",{token:t}),e.prev=1,e.next=4,fetch(c);case 4:if(!(n=e.sent).ok){e.next=10;break}return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r.user);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,c){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{body:JSON.stringify(c),cache:"no-cache",headers:{"content-type":"application/json"},method:"POST",mode:"cors",redirect:"follow",referrer:"no-referrer"}));case 1:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=t.params,n=void 0===c?{}:c,r=t.token,a=void 0===r?"":r,s=encodeURIComponent;n.t=null!==a&&void 0!==a?a:"";var l=Object.keys(null!==n&&void 0!==n?n:{}).map((function(e,t){return s(e)+"="+s(n[e])})).join("&");return"https://happy-class-zuowen-ofg4dor3eq-df.a.run.app".concat(e,"?").concat(l)},N=function(e){var t=Object(n.useRef)({}),c={status:"idle",error:null,data:[]},r=Object(n.useReducer)((function(e,t){switch(t.type){case"FETCHING":return Object(f.a)(Object(f.a)({},c),{},{status:"fetching"});case"FETCHED":return Object(f.a)(Object(f.a)({},c),{},{status:"fetched",data:t.payload});case"FETCH_ERROR":return Object(f.a)(Object(f.a)({},c),{},{status:"error",error:t.payload});default:return e}}),c),a=Object(j.a)(r,2),s=a[0],l=a[1];return Object(n.useEffect)((function(){var c=!1;if(e){var n=function(){var n=Object(o.a)(Object(i.a)().mark((function n(){var r,a,s;return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l({type:"FETCHING"}),!t.current[e]){n.next=6;break}r=t.current[e],l({type:"FETCHED",payload:r}),n.next=28;break;case 6:return n.prev=6,n.next=9,fetch(e);case 9:if(!(a=n.sent).ok){n.next=20;break}return n.next=13,a.json();case 13:if(s=n.sent,t.current[e]=s,!c){n.next=17;break}return n.abrupt("return");case 17:l({type:"FETCHED",payload:s}),n.next=21;break;case 20:l({type:"FETCH_ERROR",payload:a.status});case 21:n.next=28;break;case 23:if(n.prev=23,n.t0=n.catch(6),!c){n.next=27;break}return n.abrupt("return");case 27:l({type:"FETCH_ERROR",payload:n.t0.message});case 28:case"end":return n.stop()}}),n,null,[[6,23]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){c=!0}}}),[e]),s},y=c(59),k=c.n(y),C=c(289),F=c(275),I=c(279);var E=function(e){var t,c=e.user,n=e.byUid,r=null!==(t=e.page)&&void 0!==t?t:1,a=w("/api/v1/posts",{token:null===c||void 0===c?void 0:c.token,params:{uid:null!==n&&void 0!==n?n:"",page:r}}),s=N(a),i=s.status,o=s.data,j=s.error,u=o.posts;o.authorInfo&&(document.title=o.authorInfo.FirstName+"\u7684\u4f5c\u54c1");var b=Object(d.g)(),x=Object(m.jsx)(F.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"50vh"},children:Object(m.jsx)(F.a,{item:!0,xs:3,children:Object(m.jsx)(I.a,{})})});return Object(m.jsx)("section",{className:"relative",children:Object(m.jsx)("div",{className:"relative max-w-6xl mx-auto px-4 sm:px-6",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"lg:max-w-3xl md:max-w-2xl mx-auto",children:Object(m.jsxs)("div",{className:"md:pr-4 lg:pr-12 xl:pr-16 mb-8",children:["idle"===i&&Object(m.jsx)(m.Fragment,{children:x}),"error"===i&&Object(m.jsx)("div",{children:j}),"fetching"===i&&Object(m.jsx)(m.Fragment,{children:x}),"fetched"===i&&u&&Object(m.jsxs)(m.Fragment,{children:[o.authorInfo?Object(m.jsxs)("div",{className:"h3 mb-10",children:[o.authorInfo.FirstName," \u7684\u4f5c\u54c1"]}):"",0===u.length&&Object(m.jsx)("div",{children:" No articles found! :( "}),u.map((function(e){return Object(m.jsxs)("div",{className:"box-content shadow-xl rounded-2xl mb-16 p-5 bg-gray-100 pl-8 pr-8","data-aos":"fade-right",children:[Object(m.jsxs)("div",{className:"mb-4 pt-4",children:[Object(m.jsx)(l.b,{to:"/article/".concat(e.Id),className:"h4 text-gray-700 hover:underline pr-3",children:e.Title}),Object(m.jsxs)("div",{className:"mt-4 mb-4",children:[Object(m.jsx)(l.b,{to:"/articles/by/".concat(null===e||void 0===e?void 0:e.AuthorId),className:"font-light text-xl",children:e.AuthorInfo.FirstName}),Object(m.jsxs)("span",{className:"text-gray-500 text-sm",children:[" \u53d1\u8868\u4e8e ",new Date(null===e||void 0===e?void 0:e.CreatedAt).toLocaleDateString()]})]}),Object(m.jsx)("hr",{})]}),Object(m.jsx)("div",{className:"text-gray-700 ".concat(k.a.article),dangerouslySetInnerHTML:{__html:e.ContentHtml}})]},e.Id)}))]})]})}),o?Object(m.jsx)(C.a,{className:"lg:max-w-3xl md:max-w-2xl mx-auto",onChange:function(e,t){!function(e){b.push(window.location.pathname+"?page="+e)}(t)},page:r,count:o.totoalPage,color:"primary"}):Object(m.jsx)(m.Fragment,{}),Object(m.jsx)("div",{})]})})})};var S=function(){var e,t=new URLSearchParams(Object(d.h)().search),c=parseInt(null!==(e=t.get("page"))&&void 0!==e?e:1);return Object(m.jsxs)("div",{className:"flex flex-col min-h-screen overflow-hidden mb-16",children:[Object(m.jsx)(h,{}),Object(m.jsxs)("main",{className:"flex-grow",children:[Object(m.jsx)(O,{}),Object(m.jsx)(Y.Consumer,{children:function(e){var t=e.user;e._,e.__;return Object(m.jsx)(E,{user:t,page:c})}})]})]})},_=function(e){var t=e.user,c=e.login,n=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n,r,a,s,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log("value:",t.target.username.value),n=t.target.username.value,r=t.target.password.value,n&&r){e.next=6;break}return e.abrupt("return");case 6:return a={username:n,password:r},e.prev=7,e.next=10,p(a);case 10:if((s=e.sent).ok){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,s.json();case 15:l=e.sent,c(l),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),console.log("login error: ",e.t0);case 22:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(t){return e.apply(this,arguments)}}();if(t.token){var r=new URL(window.location).searchParams.get("redirect");return Object(m.jsx)(d.a,{to:r||"/"})}return Object(m.jsxs)("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[Object(m.jsx)(h,{}),Object(m.jsx)("main",{className:"flex-grow",children:Object(m.jsx)("section",{className:"bg-gradient-to-b from-gray-100 to-white",children:Object(m.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:Object(m.jsxs)("div",{className:"pt-32 pb-12 md:pt-40 md:pb-20",children:[Object(m.jsx)("div",{className:"max-w-3xl mx-auto text-center pb-12 md:pb-20",children:Object(m.jsx)("h1",{className:"font-light h3",children:"\u6b22\u8fce\u56de\u6765\uff01\u671f\u5f85\u4f60\u7684\u5927\u4f5c\u3002"})}),Object(m.jsx)("div",{className:"max-w-sm mx-auto",children:Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsx)("div",{className:"flex flex-wrap -mx-3 mb-4",children:Object(m.jsxs)("div",{className:"w-full px-3",children:[Object(m.jsx)("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"username",children:"\u7528\u6237\u540d"}),Object(m.jsx)("input",{id:"username",className:"form-input w-full text-gray-800",placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d",required:!0,autoFocus:!0})]})}),Object(m.jsx)("div",{className:"flex flex-wrap -mx-3 mb-4",children:Object(m.jsxs)("div",{className:"w-full px-3",children:[Object(m.jsx)("div",{className:"flex justify-between",children:Object(m.jsx)("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"password",children:"\u5bc6\u7801"})}),Object(m.jsx)("input",{id:"password",type:"password",className:"form-input w-full text-gray-800",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",required:!0})]})}),Object(m.jsx)("div",{className:"flex flex-wrap -mx-3 mt-6",children:Object(m.jsx)("div",{className:"w-full px-3",children:Object(m.jsx)("button",{type:"submit",className:"btn text-white bg-blue-600 hover:bg-blue-700 w-full",children:"\u767b\u5f55"})})})]})})]})})})})]})},T=c(287),R=c(291),H=c(281),A=c(288),D=c(116),L=c.n(D);c(242);function q(e){var t,c=e.user,r=Object(n.useState)(null),a=Object(j.a)(r,2),s=a[0],l=a[1],u=Object(n.useState)(null),b=Object(j.a)(u,2),x=b[0],O=b[1],f=Object(n.useState)(""),p=Object(j.a)(f,2),v=p[0],g=p[1],N=Object(n.useState)("public"),y=Object(j.a)(N,2),k=y[0],C=y[1],F=Object(n.useRef)(null),I=Object(d.i)().postId;Object(n.useEffect)((function(){var e=!0;if(I)try{Object(o.a)(Object(i.a)().mark((function t(){var n,r,a,s;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=w("/api/v1/posts/"+I,{token:null!==(n=null===c||void 0===c?void 0:c.token)&&void 0!==n?n:""}),t.next=3,fetch(r);case 3:if((a=t.sent).ok){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,a.json();case 8:if(s=t.sent,e){t.next=11;break}return t.abrupt("return");case 11:O(s.post),g(s.post.Title),C(s.post.Access);case 14:case"end":return t.stop()}}),t)})))()}catch(t){console.log(t)}return function(){e=!1}}),[I,null===c||void 0===c?void 0:c.token]);var E=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n,r,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),x.Content=JSON.stringify(x.Content),x.Title=v,x.Access=k,e.prev=4,n=I,!I){e.next=11;break}return e.next=9,fetch(w("/api/v1/posts/"+I,{token:null===c||void 0===c?void 0:c.token}),{method:"PUT",body:JSON.stringify(x)});case 9:e.next=19;break;case 11:return e.next=13,fetch(w("/api/v1/posts",{token:null===c||void 0===c?void 0:c.token}),{method:"POST",body:JSON.stringify(x)});case 13:if(!(r=e.sent).ok){e.next=19;break}return e.next=17,r.json();case 17:a=e.sent,n=a.post.Id;case 19:l(n),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),console.log("save error: ",e.t0);case 25:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(t){return e.apply(this,arguments)}}();if(!c.token){var S=encodeURIComponent(window.location.pathname);return Object(m.jsx)(d.a,{to:"/signin?redirect=".concat(S)})}if(s)return Object(m.jsx)(d.a,{to:"/article/"+s});var _=Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(L.a,{id:"editor",ref:F,theme:"snow",modules:{toolbar:[[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},value:null!==(t=null===x||void 0===x?void 0:x.ContentHtml)&&void 0!==t?t:"",onChange:function(e){O({Content:F.current.getEditor().getContents(),ContentHtml:e})},className:"h-96"})});return Object(m.jsxs)("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[Object(m.jsx)(h,{}),Object(m.jsx)("section",{className:"bg-gradient-to-b to-white mt-10",children:Object(m.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:Object(m.jsx)("div",{className:"pt-32 pb-12 md:pt-20 md:pb-20",children:Object(m.jsx)("div",{className:"mx-auto",children:Object(m.jsxs)("form",{onSubmit:E,children:[Object(m.jsx)("div",{className:"flex flex-wrap -mx-3 mb-8",children:Object(m.jsx)("div",{className:"w-full px-3",children:Object(m.jsx)(T.a,{value:v,onChange:function(e){g(e.target.value)},id:"title",className:"form-input w-full text-gray-800",label:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898",required:!0,autoFocus:!0})})}),Object(m.jsx)("div",{className:"flex flex-wrap -mx-3 mb-4",children:Object(m.jsxs)("div",{className:"w-full px-3",children:[Object(m.jsx)("div",{className:"flex justify-between",children:Object(m.jsx)("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"access",children:"\u8bbf\u95ee\u6743\u9650"})}),Object(m.jsxs)(R.a,{row:!0,"aria-label":"\u8bbf\u95ee\u6743\u9650",name:"access",value:k,onChange:function(e){C(e.target.value)},children:[Object(m.jsx)(H.a,{value:"public",control:Object(m.jsx)(A.a,{}),label:"\u516c\u5f00"}),Object(m.jsx)(H.a,{value:"private",control:Object(m.jsx)(A.a,{}),label:"\u79c1\u4eba"})]})]})}),Object(m.jsx)("div",{className:"flex flex-wrap -mx-3 mb-4",children:Object(m.jsxs)("div",{className:"w-full px-3",children:[Object(m.jsx)("div",{className:"flex justify-between",children:Object(m.jsx)("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"content",children:"\u6587\u7ae0\u6807\u9898"})}),_]})}),Object(m.jsx)("div",{className:"flex flex-wrap -mx-3 mt-20",children:Object(m.jsx)("div",{className:"w-full px-3",children:Object(m.jsx)("button",{className:"btn text-white bg-blue-600 hover:bg-blue-700 w-full",children:"\u4fdd\u5b58"})})})]})})})})})]})}var P=c(292),U=c(282),z=c(283),J=c(284),B=c(285),G=c(286);var M=function(e){var t=e.user,c=Object(d.i)().id,r=Object(n.useState)(),a=Object(j.a)(r,2),s=a[0],u=a[1],b=Object(n.useState)(!1),x=Object(j.a)(b,2),O=x[0],f=x[1],p=Object(d.g)();function v(){p.push("/compose/".concat(_.Id))}var g=w("/api/v1/posts/".concat(c),{token:t.token}),y=N(g),C=y.status,E=y.data,S=y.error,_=E.post,T=function(){f(!0)},R=function(e){f(!1),"yes"===e.currentTarget.value&&H()},H=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w("/api/v1/posts/"+c,{token:t.token}),e.prev=1,e.next=4,fetch(n,{method:"DELETE",mode:"cors"});case 4:e.sent.ok&&u(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();if(s)return Object(m.jsx)(d.a,{to:"/"});var A=Object(m.jsxs)(P.a,{open:O,onClose:R,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(m.jsx)(U.a,{id:"alert-dialog-title",children:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u7bc7\u6587\u7ae0\u5417\uff1f"}),Object(m.jsx)(z.a,{children:Object(m.jsx)(J.a,{id:"alert-dialog-description"})}),Object(m.jsxs)(B.a,{children:[Object(m.jsx)(G.a,{onClick:R,color:"primary",children:"\u53d6\u6d88"}),Object(m.jsx)(G.a,{value:"yes",onClick:R,color:"secondary",autoFocus:!0,children:"\u786e\u5b9a"})]})]}),D=Object(m.jsx)(F.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"50vh"},children:Object(m.jsx)(F.a,{item:!0,xs:3,children:Object(m.jsx)(I.a,{})})});return Object(m.jsxs)("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[Object(m.jsx)(h,{}),Object(m.jsx)("main",{className:"flex-grow",children:Object(m.jsx)("section",{className:"bg-gradient-to-b from-gray-100 to-white",children:Object(m.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:Object(m.jsxs)("div",{className:"pt-32 pb-12 md:pt-40 md:pb-20",children:["idle"===C&&Object(m.jsx)(m.Fragment,{children:D}),"error"===C&&Object(m.jsx)("div",{children:S}),"fetching"===C&&Object(m.jsx)(m.Fragment,{children:D}),"fetched"===C&&_&&Object(m.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:Object(m.jsx)("div",{className:"min-h-screen overflow-hidden",children:Object(m.jsxs)("div",{className:"mb-10 p-5 bg-gray-100","data-aos":"fade-right",children:[Object(m.jsxs)("div",{className:"mb-4",children:[Object(m.jsxs)("div",{className:"mb-4",children:[Object(m.jsx)(l.b,{to:"/article/".concat(_.Id),className:"h4 text-gray-700 hover:underline pr-3",children:_.Title}),Object(m.jsxs)("div",{className:"mt-4 mb-4",children:[Object(m.jsx)(l.b,{to:"/articles/by/".concat(null===_||void 0===_?void 0:_.AuthorId),className:"font-light text-xl",children:_.AuthorInfo.FirstName}),Object(m.jsxs)("span",{className:"text-gray-500 text-sm",children:[" \u53d1\u8868\u4e8e ",new Date(null===_||void 0===_?void 0:_.CreatedAt).toLocaleDateString()]}),Object(m.jsx)(Y.Consumer,{children:function(e){var t,c,n=e.user;e._,e.__;return null!==(t=n.Id===(null===_||void 0===_||null===(c=_.AuthorInfo)||void 0===c?void 0:c.Id))&&void 0!==t&&t?Object(m.jsxs)("span",{className:"float-right",children:[Object(m.jsx)(G.a,{variant:"contained",color:"primary",onClick:v,children:"\u7f16\u8f91"}),Object(m.jsx)("span",{className:"px-3"}),Object(m.jsx)(G.a,{variant:"contained",color:"secondary",onClick:T,children:"\u5220\u9664"})]}):Object(m.jsx)(m.Fragment,{})}})]}),Object(m.jsx)("hr",{})]}),A]}),Object(m.jsx)("div",{className:"text-xl leading-relaxed text-gray-600 ".concat(k.a.article),dangerouslySetInnerHTML:{__html:_.ContentHtml}})]},_.Id)})})]})})})})]})};function W(e){var t,c=Object(d.i)().userId,n=new URLSearchParams(Object(d.h)().search),r=parseInt(null!==(t=n.get("page"))&&void 0!==t?t:1);return Object(m.jsxs)("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[Object(m.jsx)(h,{}),Object(m.jsx)("main",{className:"mt-20 pt-10",children:Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(E,{byUid:c,page:r,user:e.user})})})]})}var Y=r.a.createContext(null),$="token";var K=function(){var e=localStorage.getItem($),t=Object(n.useState)({token:null!==e&&void 0!==e?e:""}),c=Object(j.a)(t,2),r=c[0],a=c[1];Object(n.useEffect)((function(){var t=!0;if(e){var c=function(){var c=Object(o.a)(Object(i.a)().mark((function c(){var n;return Object(i.a)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,v(e);case 2:if(n=c.sent,t){c.next=5;break}return c.abrupt("return");case 5:n?(n.token=e,a(n)):localStorage.removeItem($);case 6:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();return c(),function(){t=!1}}}),[e]);var s=Object(d.h)();return Object(n.useEffect)((function(){b.a.init({once:!0,duration:700,easing:"ease-out-cubic"})})),Object(n.useEffect)((function(){document.querySelector("html").style.scrollBehavior="auto",window.scroll({top:0}),document.querySelector("html").style.scrollBehavior="",Object(x.a)("outline")}),[s.pathname]),Object(m.jsx)(Y.Provider,{value:{user:r,login:function(e){a(e),localStorage.setItem($,e.token)},logout:function(){a({token:""}),localStorage.removeItem($)}},children:Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{exact:!0,path:"/",children:Object(m.jsx)(S,{})}),Object(m.jsx)(d.b,{exact:!0,path:"/articles/by/:userId?",children:Object(m.jsx)(W,{user:r})}),Object(m.jsx)(d.b,{path:"/signin",children:Object(m.jsx)(Y.Consumer,{children:function(e){var t=e.user,c=e.login;e._;return Object(m.jsx)(_,{user:t,login:c})}})}),Object(m.jsx)(d.b,{path:"/compose/:postId?",children:Object(m.jsx)(Y.Consumer,{children:function(e){var t=e.user;e._,e.__;return Object(m.jsx)(q,{user:t})}})}),Object(m.jsx)(d.b,{path:"/article/:id",children:Object(m.jsx)(Y.Consumer,{children:function(e){var t=e.user;e._,e.__;return Object(m.jsx)(M,{user:t})}})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(l.a,{children:Object(m.jsx)(K,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,t,c){e.exports={article:"Article_article__TtqOq"}}},[[244,1,2]]]);
//# sourceMappingURL=main.14c72de2.chunk.js.map