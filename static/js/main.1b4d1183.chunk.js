(this["webpackJsonpsimple-light-react"]=this["webpackJsonpsimple-light-react"]||[]).push([[0],{127:function(e,t,n){},237:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(11),s=n.n(c),l=n(15),i=n(12),o=n.n(i),d=n(22),u=n(20),j=n(8),x=(n(127),n(107)),b=n.n(x),m=n(112),h=n(2);var f=function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){var e=function(){window.pageYOffset>10?a(!1):a(!0)};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[n]);var c=Object(h.jsx)($.Consumer,{children:function(e){var t,n=e.user,r=(e._,e.logout);return Object(h.jsx)(h.Fragment,{children:n.token?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("li",{children:Object(h.jsx)(l.b,{to:null!==(t="/articles/by/"+(null===n||void 0===n?void 0:n.Id))&&void 0!==t?t:"",className:"font-medium text-gray-600 hover:text-gray-900 px-5 py-3 flex items-center transition duration-150 ease-in-out",children:n.FirstName})}),Object(h.jsx)("li",{children:Object(h.jsx)(l.b,{to:"#",onClick:r,className:"font-medium text-gray-600 hover:text-gray-900 px-5 py-3 flex items-center transition duration-150 ease-in-out",children:"\u767b\u51fa"})})]}):Object(h.jsx)("li",{children:Object(h.jsx)(l.b,{to:"/signin",className:"font-medium text-gray-600 hover:text-gray-900 px-5 py-3 flex items-center transition duration-150 ease-in-out",children:"\u767b\u5f55"})})})}});return Object(h.jsx)("header",{className:"fixed w-full z-30 md:bg-opacity-90 transition duration-300 ease-in-out ".concat(!n&&"bg-white blur shadow-lg"),children:Object(h.jsx)("div",{className:"max-w-6xl mx-auto px-5 sm:px-6",children:Object(h.jsxs)("div",{className:"flex items-center justify-between h-16 md:h-20",children:[Object(h.jsx)("div",{className:"flex-shrink-0 mr-4",children:Object(h.jsx)(l.b,{to:"/",className:"block","aria-label":"Cruip",children:Object(h.jsx)("img",{className:"md:max-w-none mx-auto",src:"/logo192.png",width:"40",height:"40",alt:"logo"})})}),Object(h.jsx)("nav",{className:"flex flex-grow",children:Object(h.jsx)("ul",{className:"flex flex-grow justify-end flex-wrap items-center",children:c})})]})})})};var p=function(){return Object(h.jsxs)("section",{className:"relative",children:[Object(h.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 bottom-0 pointer-events-none","aria-hidden":"true",children:Object(h.jsxs)("svg",{width:"1360",height:"578",viewBox:"0 0 1360 578",xmlns:"http://www.w3.org/2000/svg",children:[Object(h.jsx)("defs",{children:Object(h.jsxs)("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"illustration-01",children:[Object(h.jsx)("stop",{stopColor:"#FFF",offset:"0%"}),Object(h.jsx)("stop",{stopColor:"#EAEAEA",offset:"77.402%"}),Object(h.jsx)("stop",{stopColor:"#DFDFDF",offset:"100%"})]})}),Object(h.jsxs)("g",{fill:"url(#illustration-01)",fillRule:"evenodd",children:[Object(h.jsx)("circle",{cx:"1232",cy:"128",r:"128"}),Object(h.jsx)("circle",{cx:"155",cy:"443",r:"64"})]})]})}),Object(h.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:Object(h.jsx)("div",{className:"pt-32 pb-12 md:pt-40 md:pb-20",children:Object(h.jsxs)("div",{className:"text-center pb-12 md:pb-16",children:[Object(h.jsx)("h1",{className:"text-3xl md:text-4xl font-bold leading-tighter tracking-tighter mb-4","data-aos":"zoom-y-out",children:"\u5929\u4e0b\u4e8b\u6709\u96be\u6613\u4e4e\uff1f"}),Object(h.jsxs)("div",{className:"max-w-3xl mx-auto",children:[Object(h.jsx)("p",{className:"text-xl font-light text-gray-500 mb-8","data-aos":"zoom-y-out","data-aos-delay":"150",children:"\u4e3a\u4e4b\uff0c\u5219\u96be\u8005\u4ea6\u6613\u77e3\uff1b\u4e0d\u4e3a\uff0c\u5219\u6613\u8005\u4ea6\u96be\u77e3\u3002"}),Object(h.jsxs)("div",{className:"max-w-xs mx-auto sm:max-w-none sm:flex sm:justify-center","data-aos":"zoom-y-out","data-aos-delay":"300",children:[Object(h.jsx)("div",{children:Object(h.jsx)(l.b,{to:"/compose",className:"btn text-white bg-blue-600 hover:bg-blue-700 w-full mb-4 sm:w-auto sm:mb-0",children:"\u5f00\u59cb\u5199\u4f5c"})}),Object(h.jsx)($.Consumer,{children:function(e){var t=e.user;e._,e.__;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(l.b,{to:t.token?"/articles/by/".concat(t.Id):"/signin",className:"btn text-white bg-gray-900 hover:bg-gray-800 w-full sm:w-auto sm:ml-4",children:"\u6211\u7684\u4f5c\u54c1"})})}})]})]})]})})})]})},O=n(37),v=function(e){return w(N("/api/v1/auth"),e)},g=function(){var e=Object(d.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N("/api/v1/user",{token:t}),e.prev=1,e.next=4,fetch(n);case 4:if(!(r=e.sent).ok){e.next=10;break}return e.next=8,r.json();case 8:return a=e.sent,e.abrupt("return",a.user);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{body:JSON.stringify(n),cache:"no-cache",headers:{"content-type":"application/json"},method:"POST",mode:"cors",redirect:"follow",referrer:"no-referrer"}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.params,r=void 0===n?{}:n,a=t.token,c=void 0===a?"":a,s=encodeURIComponent;r.t=null!==c&&void 0!==c?c:"";var l=Object.keys(null!==r&&void 0!==r?r:{}).map((function(e,t){return s(e)+"="+s(r[e])})).join("&");return"https://s.mincodes.com/apps/happyclass".concat(e,"?").concat(l)},y=function(e){var t=Object(r.useRef)({}),n={status:"idle",error:null,data:[]},a=Object(r.useReducer)((function(e,t){switch(t.type){case"FETCHING":return Object(O.a)(Object(O.a)({},n),{},{status:"fetching"});case"FETCHED":return Object(O.a)(Object(O.a)({},n),{},{status:"fetched",data:t.payload});case"FETCH_ERROR":return Object(O.a)(Object(O.a)({},n),{},{status:"error",error:t.payload});default:return e}}),n),c=Object(u.a)(a,2),s=c[0],l=c[1];return Object(r.useEffect)((function(){var n=!1;if(e)return function(){var r=Object(d.a)(o.a.mark((function r(){var a,c,s;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l({type:"FETCHING"}),!t.current[e]){r.next=6;break}a=t.current[e],l({type:"FETCHED",payload:a}),r.next=28;break;case 6:return r.prev=6,r.next=9,fetch(e);case 9:if(!(c=r.sent).ok){r.next=20;break}return r.next=13,c.json();case 13:if(s=r.sent,t.current[e]=s,!n){r.next=17;break}return r.abrupt("return");case 17:l({type:"FETCHED",payload:s}),r.next=21;break;case 20:l({type:"FETCH_ERROR",payload:c.status});case 21:r.next=28;break;case 23:if(r.prev=23,r.t0=r.catch(6),!n){r.next=27;break}return r.abrupt("return");case 27:l({type:"FETCH_ERROR",payload:r.t0.message});case 28:case"end":return r.stop()}}),r,null,[[6,23]])})));return function(){return r.apply(this,arguments)}}()(),function(){n=!0}}),[e]),s},k=n(62),C=n.n(k),F=n(282),I=n(268),E=n(272);var S=function(e){var t,n=e.user,r=e.byUid,a=null!==(t=e.page)&&void 0!==t?t:1,c=N("/api/v1/posts",{token:null===n||void 0===n?void 0:n.token,params:{uid:null!==r&&void 0!==r?r:"",page:a}}),s=y(c),i=s.status,o=s.data,d=s.error,u=o.posts;o.authorInfo&&(document.title=o.authorInfo.FirstName+"\u7684\u4f5c\u54c1");var x=Object(j.g)(),b=Object(h.jsx)(I.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"50vh"},children:Object(h.jsx)(I.a,{item:!0,xs:3,children:Object(h.jsx)(E.a,{})})});return Object(h.jsx)("section",{className:"relative",children:Object(h.jsx)("div",{className:"relative max-w-6xl mx-auto px-4 sm:px-6",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"lg:max-w-3xl md:max-w-2xl mx-auto",children:Object(h.jsxs)("div",{className:"md:pr-4 lg:pr-12 xl:pr-16 mb-8",children:["idle"===i&&Object(h.jsx)(h.Fragment,{children:b}),"error"===i&&Object(h.jsx)("div",{children:d}),"fetching"===i&&Object(h.jsx)(h.Fragment,{children:b}),"fetched"===i&&u&&Object(h.jsxs)(h.Fragment,{children:[o.authorInfo?Object(h.jsxs)("div",{className:"h3 mb-10",children:[o.authorInfo.FirstName," \u7684\u4f5c\u54c1"]}):"",0===u.length&&Object(h.jsx)("div",{children:" No articles found! :( "}),u.map((function(e){return Object(h.jsxs)("div",{className:"box-content shadow-xl rounded-2xl mb-16 p-5 bg-gray-100 pl-8 pr-8","data-aos":"fade-right",children:[Object(h.jsxs)("div",{className:"mb-4 pt-4",children:[Object(h.jsx)(l.b,{to:"/article/".concat(e.Id),className:"h4 text-gray-700 hover:underline pr-3",children:e.Title}),Object(h.jsxs)("div",{className:"mt-4 mb-4",children:[Object(h.jsx)(l.b,{to:"/articles/by/".concat(null===e||void 0===e?void 0:e.AuthorId),className:"font-light text-xl",children:e.AuthorInfo.FirstName}),Object(h.jsxs)("span",{className:"text-gray-500 text-sm",children:[" \u53d1\u8868\u4e8e ",new Date(null===e||void 0===e?void 0:e.CreatedAt).toLocaleDateString()]})]}),Object(h.jsx)("hr",{})]}),Object(h.jsx)("div",{className:"text-gray-700 ".concat(C.a.article),dangerouslySetInnerHTML:{__html:e.ContentHtml}})]},e.Id)}))]})]})}),o?Object(h.jsx)(F.a,{className:"lg:max-w-3xl md:max-w-2xl mx-auto",onChange:function(e,t){!function(e){x.push(window.location.pathname+"?page="+e)}(t)},page:a,count:o.totoalPage,color:"primary"}):Object(h.jsx)(h.Fragment,{}),Object(h.jsx)("div",{})]})})})};var _=function(){var e,t=new URLSearchParams(Object(j.h)().search),n=parseInt(null!==(e=t.get("page"))&&void 0!==e?e:1);return Object(h.jsxs)("div",{className:"flex flex-col min-h-screen overflow-hidden mb-16",children:[Object(h.jsx)(f,{}),Object(h.jsxs)("main",{className:"flex-grow",children:[Object(h.jsx)(p,{}),Object(h.jsx)($.Consumer,{children:function(e){var t=e.user;e._,e.__;return Object(h.jsx)(S,{user:t,page:n})}})]})]})},T=function(e){var t=e.user,n=e.login,r=function(){var e=Object(d.a)(o.a.mark((function e(t){var r,a,c,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log("value:",t.target.username.value),r=t.target.username.value,a=t.target.password.value,r&&a){e.next=6;break}return e.abrupt("return");case 6:return c={username:r,password:a},e.prev=7,e.next=10,v(c);case 10:if((s=e.sent).ok){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,s.json();case 15:l=e.sent,n(l),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),console.log("login error: ",e.t0);case 22:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(t){return e.apply(this,arguments)}}();if(t.token){var a=new URL(window.location).searchParams.get("redirect");return Object(h.jsx)(j.a,{to:a||"/"})}return Object(h.jsxs)("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[Object(h.jsx)(f,{}),Object(h.jsx)("main",{className:"flex-grow",children:Object(h.jsx)("section",{className:"bg-gradient-to-b from-gray-100 to-white",children:Object(h.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:Object(h.jsxs)("div",{className:"pt-32 pb-12 md:pt-40 md:pb-20",children:[Object(h.jsx)("div",{className:"max-w-3xl mx-auto text-center pb-12 md:pb-20",children:Object(h.jsx)("h1",{className:"font-light h3",children:"\u6b22\u8fce\u56de\u6765\uff01\u671f\u5f85\u4f60\u7684\u5927\u4f5c\u3002"})}),Object(h.jsx)("div",{className:"max-w-sm mx-auto",children:Object(h.jsxs)("form",{onSubmit:r,children:[Object(h.jsx)("div",{className:"flex flex-wrap -mx-3 mb-4",children:Object(h.jsxs)("div",{className:"w-full px-3",children:[Object(h.jsx)("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"username",children:"\u7528\u6237\u540d"}),Object(h.jsx)("input",{id:"username",className:"form-input w-full text-gray-800",placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d",required:!0,autoFocus:!0})]})}),Object(h.jsx)("div",{className:"flex flex-wrap -mx-3 mb-4",children:Object(h.jsxs)("div",{className:"w-full px-3",children:[Object(h.jsx)("div",{className:"flex justify-between",children:Object(h.jsx)("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"password",children:"\u5bc6\u7801"})}),Object(h.jsx)("input",{id:"password",type:"password",className:"form-input w-full text-gray-800",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",required:!0})]})}),Object(h.jsx)("div",{className:"flex flex-wrap -mx-3 mt-6",children:Object(h.jsx)("div",{className:"w-full px-3",children:Object(h.jsx)("button",{type:"submit",className:"btn text-white bg-blue-600 hover:bg-blue-700 w-full",children:"\u767b\u5f55"})})})]})})]})})})})]})},R=n(280),H=n(284),A=n(274),D=n(281),L=n(111),q=n.n(L);n(236);function P(e){var t,n=e.user,a=Object(r.useState)(null),c=Object(u.a)(a,2),s=c[0],l=c[1],i=Object(r.useState)(null),x=Object(u.a)(i,2),b=x[0],m=x[1],p=Object(r.useState)(""),O=Object(u.a)(p,2),v=O[0],g=O[1],w=Object(r.useState)("public"),y=Object(u.a)(w,2),k=y[0],C=y[1],F=Object(r.useRef)(null),I=Object(j.i)().postId;Object(r.useEffect)((function(){var e=!0;if(I)try{Object(d.a)(o.a.mark((function t(){var r,a,c,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=N("/api/v1/posts/"+I,{token:null!==(r=null===n||void 0===n?void 0:n.token)&&void 0!==r?r:""}),t.next=3,fetch(a);case 3:if((c=t.sent).ok){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,c.json();case 8:if(s=t.sent,e){t.next=11;break}return t.abrupt("return");case 11:m(s.post),g(s.post.Title),C(s.post.Access);case 14:case"end":return t.stop()}}),t)})))()}catch(t){console.log(t)}return function(){e=!1}}),[I,null===n||void 0===n?void 0:n.token]);var E=function(){var e=Object(d.a)(o.a.mark((function e(t){var r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b.Content=JSON.stringify(b.Content),b.Title=v,b.Access=k,e.prev=4,r=I,!I){e.next=11;break}return e.next=9,fetch(N("/api/v1/posts/"+I,{token:null===n||void 0===n?void 0:n.token}),{method:"PUT",body:JSON.stringify(b)});case 9:e.next=19;break;case 11:return e.next=13,fetch(N("/api/v1/posts",{token:null===n||void 0===n?void 0:n.token}),{method:"POST",body:JSON.stringify(b)});case 13:if(!(a=e.sent).ok){e.next=19;break}return e.next=17,a.json();case 17:c=e.sent,r=c.post.Id;case 19:l(r),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),console.log("save error: ",e.t0);case 25:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(t){return e.apply(this,arguments)}}();if(!n.token){var S=encodeURIComponent(window.location.pathname);return Object(h.jsx)(j.a,{to:"/signin?redirect=".concat(S)})}if(s)return Object(h.jsx)(j.a,{to:"/article/"+s});var _=Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(q.a,{id:"editor",ref:F,theme:"snow",modules:{toolbar:[[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},value:null!==(t=null===b||void 0===b?void 0:b.ContentHtml)&&void 0!==t?t:"",onChange:function(e){m({Content:F.current.getEditor().getContents(),ContentHtml:e})},className:"h-96"})});return Object(h.jsxs)("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[Object(h.jsx)(f,{}),Object(h.jsx)("section",{className:"bg-gradient-to-b to-white mt-10",children:Object(h.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:Object(h.jsx)("div",{className:"pt-32 pb-12 md:pt-20 md:pb-20",children:Object(h.jsx)("div",{className:"mx-auto",children:Object(h.jsxs)("form",{onSubmit:E,children:[Object(h.jsx)("div",{className:"flex flex-wrap -mx-3 mb-8",children:Object(h.jsx)("div",{className:"w-full px-3",children:Object(h.jsx)(R.a,{value:v,onChange:function(e){g(e.target.value)},id:"title",className:"form-input w-full text-gray-800",label:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898",required:!0,autoFocus:!0})})}),Object(h.jsx)("div",{className:"flex flex-wrap -mx-3 mb-4",children:Object(h.jsxs)("div",{className:"w-full px-3",children:[Object(h.jsx)("div",{className:"flex justify-between",children:Object(h.jsx)("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"access",children:"\u8bbf\u95ee\u6743\u9650"})}),Object(h.jsxs)(H.a,{row:!0,"aria-label":"\u8bbf\u95ee\u6743\u9650",name:"access",value:k,onChange:function(e){C(e.target.value)},children:[Object(h.jsx)(A.a,{value:"public",control:Object(h.jsx)(D.a,{}),label:"\u516c\u5f00"}),Object(h.jsx)(A.a,{value:"private",control:Object(h.jsx)(D.a,{}),label:"\u79c1\u4eba"})]})]})}),Object(h.jsx)("div",{className:"flex flex-wrap -mx-3 mb-4",children:Object(h.jsxs)("div",{className:"w-full px-3",children:[Object(h.jsx)("div",{className:"flex justify-between",children:Object(h.jsx)("label",{className:"block text-gray-800 text-sm font-medium mb-1",htmlFor:"content",children:"\u6587\u7ae0\u6807\u9898"})}),_]})}),Object(h.jsx)("div",{className:"flex flex-wrap -mx-3 mt-20",children:Object(h.jsx)("div",{className:"w-full px-3",children:Object(h.jsx)("button",{className:"btn text-white bg-blue-600 hover:bg-blue-700 w-full",children:"\u4fdd\u5b58"})})})]})})})})})]})}var U=n(285),J=n(275),z=n(276),B=n(277),G=n(278),M=n(279);var W=function(e){var t=e.user,n=Object(j.i)().id,a=Object(r.useState)(),c=Object(u.a)(a,2),s=c[0],i=c[1],x=Object(r.useState)(!1),b=Object(u.a)(x,2),m=b[0],p=b[1],O=Object(j.g)();function v(){O.push("/compose/".concat(_.Id))}var g=N("/api/v1/posts/".concat(n),{token:t.token}),w=y(g),k=w.status,F=w.data,S=w.error,_=F.post,T=function(){p(!0)},R=function(e){p(!1),"yes"===e.currentTarget.value&&H()},H=function(){var e=Object(d.a)(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N("/api/v1/posts/"+n,{token:t.token}),e.prev=1,e.next=4,fetch(r,{method:"DELETE",mode:"cors"});case 4:e.sent.ok&&i(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();if(s)return Object(h.jsx)(j.a,{to:"/"});var A=Object(h.jsxs)(U.a,{open:m,onClose:R,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(h.jsx)(J.a,{id:"alert-dialog-title",children:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u7bc7\u6587\u7ae0\u5417\uff1f"}),Object(h.jsx)(z.a,{children:Object(h.jsx)(B.a,{id:"alert-dialog-description"})}),Object(h.jsxs)(G.a,{children:[Object(h.jsx)(M.a,{onClick:R,color:"primary",children:"\u53d6\u6d88"}),Object(h.jsx)(M.a,{value:"yes",onClick:R,color:"secondary",autoFocus:!0,children:"\u786e\u5b9a"})]})]}),D=Object(h.jsx)(I.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"50vh"},children:Object(h.jsx)(I.a,{item:!0,xs:3,children:Object(h.jsx)(E.a,{})})});return Object(h.jsxs)("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[Object(h.jsx)(f,{}),Object(h.jsx)("main",{className:"flex-grow",children:Object(h.jsx)("section",{className:"bg-gradient-to-b from-gray-100 to-white",children:Object(h.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:Object(h.jsxs)("div",{className:"pt-32 pb-12 md:pt-40 md:pb-20",children:["idle"===k&&Object(h.jsx)(h.Fragment,{children:D}),"error"===k&&Object(h.jsx)("div",{children:S}),"fetching"===k&&Object(h.jsx)(h.Fragment,{children:D}),"fetched"===k&&_&&Object(h.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:Object(h.jsx)("div",{className:"min-h-screen overflow-hidden",children:Object(h.jsxs)("div",{className:"mb-10 p-5 bg-gray-100","data-aos":"fade-right",children:[Object(h.jsxs)("div",{className:"mb-4",children:[Object(h.jsxs)("div",{className:"mb-4",children:[Object(h.jsx)(l.b,{to:"/article/".concat(_.Id),className:"h4 text-gray-700 hover:underline pr-3",children:_.Title}),Object(h.jsxs)("div",{className:"mt-4 mb-4",children:[Object(h.jsx)(l.b,{to:"/articles/by/".concat(null===_||void 0===_?void 0:_.AuthorId),className:"font-light text-xl",children:_.AuthorInfo.FirstName}),Object(h.jsxs)("span",{className:"text-gray-500 text-sm",children:[" \u53d1\u8868\u4e8e ",new Date(null===_||void 0===_?void 0:_.CreatedAt).toLocaleDateString()]}),Object(h.jsx)($.Consumer,{children:function(e){var t,n,r=e.user;e._,e.__;return null!==(t=r.Id===(null===_||void 0===_||null===(n=_.AuthorInfo)||void 0===n?void 0:n.Id))&&void 0!==t&&t?Object(h.jsxs)("span",{className:"float-right",children:[Object(h.jsx)(M.a,{variant:"contained",color:"primary",onClick:v,children:"\u7f16\u8f91"}),Object(h.jsx)("span",{className:"px-3"}),Object(h.jsx)(M.a,{variant:"contained",color:"secondary",onClick:T,children:"\u5220\u9664"})]}):Object(h.jsx)(h.Fragment,{})}})]}),Object(h.jsx)("hr",{})]}),A]}),Object(h.jsx)("div",{className:"text-xl leading-relaxed text-gray-600 ".concat(C.a.article),dangerouslySetInnerHTML:{__html:_.ContentHtml}})]},_.Id)})})]})})})})]})};function Y(e){var t,n=Object(j.i)().userId,r=new URLSearchParams(Object(j.h)().search),a=parseInt(null!==(t=r.get("page"))&&void 0!==t?t:1);return Object(h.jsxs)("div",{className:"flex flex-col min-h-screen overflow-hidden",children:[Object(h.jsx)(f,{}),Object(h.jsx)("main",{className:"mt-20 pt-10",children:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(S,{byUid:n,page:a,user:e.user})})})]})}var $=a.a.createContext(null),K="token";var Q=function(){var e=localStorage.getItem(K),t=Object(r.useState)({token:null!==e&&void 0!==e?e:""}),n=Object(u.a)(t,2),a=n[0],c=n[1];Object(r.useEffect)((function(){var t=!0;if(e)return function(){var n=Object(d.a)(o.a.mark((function n(){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g(e);case 2:if(r=n.sent,t){n.next=5;break}return n.abrupt("return");case 5:r?(r.token=e,c(r)):localStorage.removeItem(K);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){t=!1}}),[e]);var s=Object(j.h)();return Object(r.useEffect)((function(){b.a.init({once:!0,duration:700,easing:"ease-out-cubic"})})),Object(r.useEffect)((function(){document.querySelector("html").style.scrollBehavior="auto",window.scroll({top:0}),document.querySelector("html").style.scrollBehavior="",Object(m.a)("outline")}),[s.pathname]),Object(h.jsx)($.Provider,{value:{user:a,login:function(e){c(e),localStorage.setItem(K,e.token)},logout:function(){c({token:""}),localStorage.removeItem(K)}},children:Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{exact:!0,path:"/",children:Object(h.jsx)(_,{})}),Object(h.jsx)(j.b,{exact:!0,path:"/articles/by/:userId?",children:Object(h.jsx)(Y,{user:a})}),Object(h.jsx)(j.b,{path:"/signin",children:Object(h.jsx)($.Consumer,{children:function(e){var t=e.user,n=e.login;e._;return Object(h.jsx)(T,{user:t,login:n})}})}),Object(h.jsx)(j.b,{path:"/compose/:postId?",children:Object(h.jsx)($.Consumer,{children:function(e){var t=e.user;e._,e.__;return Object(h.jsx)(P,{user:t})}})}),Object(h.jsx)(j.b,{path:"/article/:id",children:Object(h.jsx)($.Consumer,{children:function(e){var t=e.user;e._,e.__;return Object(h.jsx)(W,{user:t})}})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(l.a,{children:Object(h.jsx)(Q,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,n){e.exports={article:"Article_article__TtqOq"}}},[[237,1,2]]]);
//# sourceMappingURL=main.1b4d1183.chunk.js.map